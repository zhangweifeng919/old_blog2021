---
title: 深度学习推荐系统实战-基础架构
date: 2021-03-21 22:50:46
tags:
- 深度学习推荐系统
categories:
- 读书笔记
description: 推荐系统是什么样子？我们要实现什么样的推荐系统？

---
###### 摘抄 极客时间 深度学习推荐系统实战（王喆）

### 推荐系统是什么样子

#### 推荐系统要解决什么问题？

现在互联网信息爆棚，在“信息过载”的情况下，用户如何高效获取感兴趣的信息。推荐系统就是在信息和用户之间搭建一道桥梁，让用户感兴趣的信息出现在用户的面前。

#### 推荐系统逻辑架构

推荐系统其实是处理“人”和“信息”之间的关系。

“信息”的定义非常多，商品推荐中指的是“商品信息”，视频推荐时指的是“视频信息”。为了方便可以统称为“**物品信息**”

从“人”的角度出发，为了更可靠的推测出“人”的兴趣点，希望利用“人”的信息，包括历史行为，人口属性，关系网络等，可以统称为“**用户信息**”

除此之外，用户的最终选择还会受时间，地点，用户状态等一系列环境的影响，这些环境信息可以称为“**场景信息**”或“**上下文信息**”

清楚了这些信息的定义，推荐系统要处理的问题就可以被形式化地定义为：**对于某个用户U（User），在特定场景C（Context）下，针对海量的“物品”信息构建一个函数 ，预测用户对特定候选物品I（Item）的喜好程度，再根据喜好程度对所有候选物品进行排序，生成推荐列表的问题**。

![图1推荐系统逻辑架构](/images/读书笔记/深度学习推荐系统实战/图1推荐系统逻辑架构.jpg)

#### 深度学习对推荐系统的革命

推荐系统的关键是上图中的$f(U,I,C)$,相比于传统的机器学习模型，深度学习模型可以最大程度的拟合这个函数。

![图2传统矩阵分解模型和深度学习矩阵分解模型](/images/读书笔记/深度学习推荐系统实战/图2传统矩阵分解模型和深度学习矩阵分解模型.jpg)

除此之外，深度学习模型非常灵活的模型结构还让它具备了一个无法替代的优势，就是我们可以**让深度学习模型的神经网络模拟很多用户兴趣的变迁过程，甚至用户做出决定的思考过程**。比如阿里巴巴的深度学习模型——深度兴趣进化网络（如图 3），它利用了三层序列模型的结构，模拟了用户在购买商品时兴趣进化的过程，如此强大的数据拟合能力和对用户行为的理解能力，是传统机器学习模型不具备的。

![图3阿里巴巴的深度兴趣进化网络](/images/读书笔记/深度学习推荐系统实战/图3阿里巴巴的深度兴趣进化网络.jpg)

#### 深度学习推荐系统的技术架构

在实际的推荐系统中，工程师需要着重解决的问题有两类。

* 一类问题与数据和信息相关，即“用户信息”“物品信息”“场景信息”分别是什么？如何存储、更新和处理数据？

* 另一类问题与推荐系统算法和模型相关，即推荐系统模型如何训练、预测，以及如何达成更好的推荐效果？

一个工业级推荐系统的技术架构其实也是按照这两部分展开的，其中“数据和信息”部分逐渐发展为推荐系统中融合了数据离线批处理、实时流处理的数据流框架；“算法和模型”部分则进一步细化为推荐系统中，集训练（Training）、评估（Evaluation）、部署（Deployment）、线上推断（Online Inference）为一体的模型框架。基于此，我们就能总结出推荐系统的技术架构图。

![图4推荐系统技术架构示意图](/images/读书笔记/深度学习推荐系统实战/图4推荐系统技术架构示意图.jpg)

##### 数据部分

推荐系统的“数据部分”主要负责的是“用户”“物品”“场景”信息的收集与处理。

根据处理数据量和处理实时性的不同，我们会用到三种不同的数据处理方式，按照实时性的强弱排序的话，它们依次是客户端与服务器端实时数据处理、流处理平台准实时数据处理、大数据平台离线数据处理。

大数据平台加工后的数据出口主要有 3 个：

* 生成推荐系统模型所需的样本数据，用于算法模型的训练和评估。
* 生成推荐系统模型服务（Model Serving）所需的“用户特征”，“物品特征”和一部分“场景特征”，用于推荐系统的线上推断。
* 生成系统监控、商业智能（Business Intelligence，BI）系统所需的统计型数据。

##### 模型部分

荐系统的“模型部分”是推荐系统的主体。模型的结构一般由“召回层”、“排序层”以及“补充策略与算法层”组成。其中，“**召回层**”一般由高效的召回规则、算法或简单的模型组成，这让推荐系统能快速从海量的候选集中召回用户可能感兴趣的物品。“**排序层**”则是利用排序模型对初筛的候选集进行精排序。而“**补充策略与算法层**”，也被称为“再排序层”，是在返回给用户推荐列表之前，为兼顾结果的“多样性”“流行度”“新鲜度”等指标，结合一些补充的策略和算法对推荐列表进行一定的调整，最终形成用户可见的推荐列表。

深度学习对于推荐系统的革命集中在模型部分，那具体都有什么呢？

我把最典型的深度学习应用总结成了 3 点：

* 深度学习中 Embedding 技术在召回层的应用。作为深度学习中非常核心的 Embedding 技术，将它应用在推荐系统的召回层中，做相关物品的快速召回，已经是业界非常主流的解决方案了。

* 不同结构的深度学习模型在排序层的应用。排序层（也称精排层）是影响推荐效果的重中之重，也是深度学习模型大展拳脚的领域。深度学习模型的灵活性高，表达能力强的特点，这让它非常适合于大数据量下的精确排序。深度学习排序模型毫无疑问是业界和学界都在不断加大投入，快速迭代的部分。

* 增强学习在模型更新、工程模型一体化方向上的应用。增强学习可以说是与深度学习密切相关的另一机器学习领域，它在推荐系统中的应用，让推荐系统可以在实时性层面更上一层楼
#### 课后思考题

  下面是 Netflix 的推荐系统的经典架构图，你能结合本节课讲的推荐系统技术架构，说出 Netflix 架构图中哪些是数据部分，哪些是模型部分吗？

![图6Netflix架构图示意图](/images/读书笔记/深度学习推荐系统实战/图6Netflix架构图示意图.jpg)

数据部分：Event Distribution, User Event Queue, Netflix.Manhattan, Cassandra, Mysql, Evcache, hadoop, Query results, Netflix.Hermes, Offline Data, Online Data Service.

模型部分: Model training, Machine Learning Algorithm, Models, Offline Computation, Nearline Computation, Algorithm Service, Online Computation,




