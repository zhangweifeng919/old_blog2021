---
title: 统计自然语言处理-形式语言与自动机
date: 2019-04-09 10:03:57
tags:
- nlp
- 统计自然语言处理
categories:
- 读书笔记
description: 形式语言理论是自然语言描述和分析的基础，自动机理论在自然语言的词法分析，拼写检查和短语识别等方面都有广泛的用途。
---
# 形式语言

## 概述

 乔姆斯基曾经把语言定义为：按照一定规律构成的句子和符号串有限或无限的集合。我国学者吴蔚天认为，可以把语言看成一个抽象的数学系统。无论把语言看成集合还是数学系统，我们都可以用数学的方法进行刻画和描述
 一般，描述一种语言可以有三种途径：
 （1）穷举法：把语言中的所有句子枚举出来。显然只适合句子数目有限的语言。
 （2）文法（产生式系统）描述：语言中的每个句子都用严格定义的规则来构造，利用规则生成语言中合法的句子。
 （3）自动机法：通过对输入句子进行合法性检验，区别哪些是语言中的句子，哪些不是语言中的句子。
 文法用来精确地描述语言和其结构，自动机则是用来机械地刻画对输入字符串的识别过程。用文法来定义语言的优点是：由文法给予语言中的句子以结构，各成分之间的结构关系清楚、明了。但是，如果要直接用这些规则来确定一个字符串是否属于这套规则所定义的语言似乎并不十分明确。而由自动机来识别一个字符串是否属于该语言则相对简单，但自动机很难描述语言的结构。所以自然语言处理中的识别和分析算法，大多兼取两者之长。

## 形式语法的定义

形式语言是用来精确描述语言（包括人工语言和自然语言）及其结构的手段。形式语言学也称代数语言学。
形式语法：形式语法是一个四元组$G=(N,\Sigma,P,S)$,其中，N是非终结符（non-terminal symbol）的有限集合；$ \Sigma $是终结符号；$V= {N \cup \Sigma}$ 称为总词汇表；P是一组重写规则的有限集合：$P={\alpha \to \beta}$，其中，$\alpha,\beta$是V中元素构成的串，但是$\alpha$中至少应该含有一个非终结符号；$S \in N$称为句子符或初始符。

## 形式语法的类型

在乔姆斯基的语法理论中，文法被划分为4种类型：3型文法，2型文法，1型文法和0型文法，分别称为正则文法，上下文无关文法，上下文相关文法和无约束文法。

### 正则文法

如果文法G的规则集P中所有规则均满足如下形式：$A \to Bx ,或A \to x,其中，A，B \in N, x \in \Sigma$，则称该文法G为正则文法，或称3型文法。
在这种书写格式中，由于规则右部的非终结符号（如果有的话）出现在最左边，所以，这种形式的正则文法又叫左线性正则文法。类似地，如果一正则文法所有含非终结符号的规则形式为$A \to xB$，则该文法称为右线性正则文法。

### 上下文无关文法

如果文法G的规则集P中所有规则均满足如下形式：$ A \to \alpha，其中，A \in N，\alpha \in (N \cup \Sigma)^*$,则称文法G为上下文无关文法（context-free grammar ,CFG），或称为2型文法。从定义上我们可以看出，2型文法比3型文法少了一层限制，其规则右端的格式没有约束。

### 上下文有关文法

如果文法G的规则集P中所有规则满足如下形式：$\alpha A \beta \to \alpha \gamma \beta$，其中，$A \in N $，$\alpha，\beta，\gamma$ $ \in (N \cup \Sigma)^*$，且$\gamma$至少包含一个字符，则称文法G为上下文有关文法（context-sensitive grammar,CSG），或称1型文法。
从上述定义可以看出，字符串$\alpha \gamma \beta$中的A被改写成$\Sigma$时需要有上文语境$\alpha$和下文语境$\beta$，这体现了上下文相关的含义。当然，$\alpha$和$\beta$可以为空字符$\varepsilon$，如果$\alpha$和$\beta$同时为空时，1型文法变成了2型文法。也就是说，2型文法是1型文法的特例。因此，1型文法可识别的语言集合比2型文法可识别的语言集合更大。

### 无约束文法

如果文法G的规则集P中所有规则满足如下形式：$\alpha \to \beta$，其中，$\alpha \in (N \cup \Sigma)^+$，$\beta \in (N \cup \Sigma)^*$，则称为无约束文法或者无限制重写系统，也称为0型文法。
根据上述定义我们不难看出，从0型文法到3型文法，对规则的约束越来越多，每一个正则文法都是上下文无关文法，每一个上下无关文法都是上下文有关文法，而每一个上下文有关文法都可以认为是0型文法。因此，从0型文法到3型文法所识别的语言集合越来越小。
我们约定，如果一个文法的产生式集合P中，有分属于不同类型文法的产生式，则把属于包含最广类型文法的那条产生式所属的类型作为这个文法的类型。比如说，某个文法的全部规则分别属于1型文法、2型文法和3型文法，则我们称这个文法为1型文法。同理，如果一种语言能够由几种文法所产生，则把这种语言称为在这几种文法中受限制最多的那种文法所产生的语言。

### CFG识别句子的派生树表示

一个上下文无关文法$G=(N,\Sigma,P,S)$产生句子的过程可以由派生树表示。派生树也称语法树（syntactic tree），分析树(parsing tree)，推导树。派生树构造步骤如下：
（1）对于任意$x \in N \cup \Sigma$，给一个标记作为节点，令文法的初始符号S作为树的根节点；
（2）如果一个节点的标记为A，且至少有一个除它自身以外的后裔，那么$A \in N$。
（3）如果一个节点的标记为A，它的k(k>0)个直接后裔节点按从左到右的顺序依次标记为$A_1,A_2,...,A_k$，则$A \to A_1,A_2,...,A_k$一定是P中的一个产生式。

### 二义性文法

如果文法G对于同一个句子存在两颗或两棵以上不同的分析叔，那么，该该句子是二义性的，文法G为二义性文法。

# 自动机理论

自动机是一种理想化的“机器”，它只是抽象分析问题的理论工具，并不具有实际的物质形态。它是科学定义的演算机器，用来表达某种不需要人力干涉的机械性演算过程。根据不同的构成和功能，自动机分成以下4种类型：有限自动机（finite automata,FA）、下推自动机（push-down automata,PDA）、线性界限自动机（linear-boundedautomata）和图灵机（Turing machine）。

## 有限自动机

有限自动机又分为确定性有限自动机（definite automata, DFA）和不确定性有限自动机（non-definite automata, NFA）两种。

确定性有限自动机（DFAM)是一个五元组
$$M＝(Σ，Q，δ，q_0，F)$$
其中，Σ是输入符号的有穷集合；Q是状态的有限集合；q0∈Q是初始状态；F是终止状态集合，F⊆Q；δ是Q与Σ的直积Q×Σ到Q（下一个状态）的映射，它支配着有限状态控制的行为，有时也称为状态转移函数。

不确定性有限自动机（NFAM)是一个五元组
$$M＝(Σ,Q,δ,q_0，F)$$
其中，Σ是输入符号的有穷集合；Q是状态的有限集合；q0∈Q是初始状态；F是终止状态集合，F⊆Q；δ是Q与Σ的直积Q×Σ到Q的幂集2Q的映射。
NFA与DFA的重要区别是：在NFA中δ（q, a）是一个状态集合，而在DFA中δ（q, a）是一个状态。根据定义，对于NFAM有映射：
$δ（q, a）＝{q_1，q_2，…，q_k}$，k≥1
其含义是：NFAM在状态q时，接受输入符号a时，M可以选择状态集q1，q2，…，qk中的任何一个状态作为下一个状态，并将输入头向右边移动一个字符的位置。
### 确定性有限自动机和不确定性有限自动机的关系
定理：设L是被NFAM所接受的语言，则存在一个DFAM，它能够接受L。可以用数学归纳法证明该定理，关于其证明过程，不再赘述。
### 正则文法与自动机的关系
若$G＝(V_N，V_T，P，S)$是一个正则文法，则存在一个$FAM＝(Σ，Q，δ,q_0，F)$，使得T(M)＝L(G)。
若$M＝(Σ，Q，δ,q_0，F)是一个有限自动机，则存在一个正则文法$G＝(V_N，V_T，P，S)$，使得L(G)＝T(M)。
根据上面介绍的三个定理可以得到一个重要结论：对于任意一个正则文法所产生的语言，总可以构造一个确定的有限自动机识别它。也就是说，对于任意一个正则文法，总可以构造一个确定的有限自动机。

## 上下文无关文法与下推自动机
下推自动机（PDA）可以看成是一个带有附加下推存储器的有限自动机，下推存储器是一个堆栈（stack）。其原理示意图如图3-7所示：
![下推自动机原理示意图](/images/读书笔记/统计自然语言处理/下推自动机原理示意图.png)

不确定的下推自动机（PDA）可以表达成一个七元组：
$$M＝（Σ，Q，Γ，δ，q_0，Z_0，F）$$
其中，Σ是输入符号的有穷集合；Q是状态的有限集合；Γ为下推存储器符号的有穷集合；$q_0∈Q$是初始状态；$Z_0∈Γ$为最初出现在下推存储器顶端的开始符号；F⊆Q是终止状态集合；δ是从Q×(Σ∪{ε})×Γ到Q× $ {\Gamma}^{\ast} $的子集的映射。
$$  \delta (q,a,Z)=\{(q_1,γ_1)，(q_2,γ_2)，(q_3,γ_3)，...，(q_m,γ_m) \}     $$
其中，$q_1，q_2，…，q_m∈Q$，$a∈Σ，Z∈Γ，γ_1，γ_2，…，γ_m∈Γ^*$。上式的含义是：当下推自动机处于状态q，接受输入符号a时，自动机将进入到$q_i$（i＝1,2，…，m）状态，并以$γ_i$来代替下推存储器（栈）顶端符号Z，同时将输入头指向下一个字符。当Z被$γ_i$取代时，$γ_i$的符号按照从左到右的顺序依次从下向上推入到存储器。
特殊情况下，$δ（q，ε，Z）＝{（q_1，γ_1），（q_2，γ_2），…，（q_m，γ_m）}$时，意味着下推自动机处于状态q时没有接受任何输入符号，因此，输入头位置不移动，只用于处理下推存储器内部的操作，自动机进入到$q_i（i＝1,2，…，m）$状态，并以$γ_i$来代替下推存储器（栈）顶端符号Z。这个操作叫做“ε移动”。

定理3-4　设L（G）为上下文无关文法语言，则存在一个PDA M＝（Σ，Q，Γ，δ，$q_0$，$Z_0$，F）使得该PDA以空存储器标准所接受的语言N（M）＝L（G）。

定理3-5　设N（M）为由PDA M＝（Σ，Q，Γ，δ, $q_0$，$Z_0$，F）以空存储器标准所接受的语言，则存在一个CFG使得L（G）＝N（M）。

## 图灵机

图灵机与有限自动机的区别在于图灵机可以通过其读写头改变输入带上的字符，而有限自动机不能做到这一点。

一个图灵机T可以表达成一个六元组：T＝（Σ，Q，Γ，δ, $q_0$，F）其中，Σ是输入／输出带上字符的有穷集合，不包含空白符号B；Q是状态的有限集合；Γ是输入符号的有穷集合，包含空符号B，Σ⊆Γ，Γ＝Σ∪{B}；$q_0$∈Q是初始状态；F是终止状态集合，F⊆Q；δ是从Q×Γ到Q×（Γ-{B}）×{R，L，S}子集的一个映射。其中，R，L，S分别表示右移一格、左移一格和停止不动。

![图灵机的格局](/images/读书笔记/统计自然语言处理/图灵机的格局.png)

图灵机和0型文法的关系可以通过定理3-6和定理3-7来说明。

定理3-6　如果L是一个由0型文法产生的语言，则L可被一个图灵机所接受。

定理3-7　如果L可被一个图灵机所接受，则L是一个由0型文法产生的语言。

## 线性界限自动机

线性界限自动机是一个确定的单带图灵机，其读／写头不能超越原输入带上字符串的初始和终止位置，即线性界限自动机的存储空间被输入符号串的长度所限制。

定义3-24（线性界限自动机）　一个线性界限自动机M可以表达成一个六元组：
M＝（Σ，Q，Γ，δ,$q_0$，F）
其中，Γ是输入／输出带上符号的有穷集合；Q是状态的有限集合；Σ是输入／输出带上字符的有穷集合，Σ⊆Γ；$q_0$∈Q是初始状态；F是终止状态集合，F⊆Q；δ是从Q×Γ到Q×Γ×{R，L}子集的映射。Σ包括两个特殊符号#和$，分别表示输入链的左端和右端结束标志。
线性界限自动机M的格局，以及两个格局之间转移关系的定义与图灵机的相同。线性界限自动机与图灵机的唯一不同是对读／写头位置的限制。在线性界限自动机中，对于读／写头超出输入字符串长度范围时，转移动作没有定义。

## 自动机在自然语言中的应用

单词拼写检查
单词形态分析
词性消岐

# 参考资料

《统计自然语言处理》（第二版）  宗成庆 著 清华大学出版社 [统计自然语言处理.mobi下载](/books/mobi/统计自然语言处理（第2版）.mobi)